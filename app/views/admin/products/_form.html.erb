<%= form_with(model: [:admin, @product], local: true) do |f| %>
  <% if @product.errors.any? %>
    <div class="flash flash-alert">
      <strong><%= pluralize(@product.errors.count, "error") %> prevented this product from being saved:</strong>
      <ul>
        <% @product.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mt-2">
    <%= f.label :name %><br>
    <%= f.text_field :name %>
  </div>

  <div class="mt-2">
    <%= f.label :category_id, "Category" %><br>
    <%= f.collection_select :category_id, Category.all, :id, :name, prompt: "Select a category" %>
  </div>

  <div class="mt-2">
    <%= f.label :current_price, "Regular price (CAD)" %><br>
    <%= f.number_field :current_price, step: 0.01 %>
  </div>

  <div class="mt-2">
    <%= f.label :sale_price, "Sale price (CAD)" %><br>
    <%= f.number_field :sale_price, step: 0.01 %>
    <p class="text-muted">
      Leave this blank if the product is not on sale.  
      If set, the original price will be shown with a line-through and the sale price in bold red.
    </p>
  </div>

  <div class="mt-2">
    <%= f.label :description %><br>
    <%= f.text_area :description, rows: 4 %>
  </div>

  <div class="mt-3">
    <%= f.submit class: "btn btn-primary" %>
    <%= link_to "Cancel", admin_products_path, class: "btn btn-secondary" %>
  </div>
<% end %>
